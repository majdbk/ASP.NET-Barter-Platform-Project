@model tntroc.WebApplication.Models.GoodModels

@{
    Layout = null;
}

@{
    Layout = "~/Views/Shared/_layoutfront.cshtml";

}

@section scripts {

    <link rel="stylesheet" type="text/css" href="~/css/TextInputs.css" />

}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Search Swappers</title>

    <script src="~/Scripts/jquery-1.10.2.min.js"></script>

    <script language="javascript" type="text/javascript">

        $(document).ready(function () {
            $(".star").mouseleave(function () {
                
                $("#" + $(this).parent().attr('id') + " .star").each(function () {
                
                    $(this).removeClass("filled");
                    $(this).addClass("outline");
                });

            });
            $(".star").mouseenter(function () {
                var hoverVal = $(this).attr('rating');
                $(this).prevUntil().addClass("filled");
                $(this).addClass("filled");
                
                $("#RAT").html(hoverVal);
            });
        });

        function StarClick(str,note) {                  

                // instanciation
                xhr = new XMLHttpRequest;
                var URL = "SaveScore";
                xhr.open("POST", URL, true);
                xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhr.send("rate=" + note+"&id="+str);
                xhr.onreadystatechange = result;

                function result() {
                    if ((xhr.readyState == 4) && (xhr.status == 200)) {
                        document.getElementById("currentS_" + str).innerHTML = xhr.responseText;
                    }
                }
                $("#"+ "div_"+str).hide();
                document.getElementById("YourScore_" + str).innerHTML = note;
            
        }
       

        function openImgPopup() {
            document.getElementById('imgPopup').style.display = 'block';
            document.getElementById('fade').style.display = 'block';

        }

        function closeImgPopup() {
            document.getElementById('imgPopup').style.display = 'none';
            document.getElementById('fade').style.display = 'none';
            document.getElementById('confPopup').style.display = 'none';
        }   

       

        function openConfPopup(src) {
            
            document.getElementById('confPopup').style.display = 'block';
            document.getElementById('fade').style.display = 'block';
            document.getElementById("imgPopup").src = src;
        }

        function closeConfPopup() {
            document.getElementById('confPopup').style.display = 'none';
            document.getElementById('fade').style.display = 'none';

        }

        
       




    </script>

   
    <script language="JavaScript" type="text/javascript" src="~/Scripts/SearchSuggestGood.js"></script>
   
    <style type="text/css" media="screen">
                body, html  { height: 100%; }
html, body, div, span, applet, object, iframe,
/*h1, h2, h3, h4, h5, h6,*/ p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
	margin: 0;
	padding: 0;
	border: 0;
	outline: 0;
	font-size: 100%;
	vertical-align: baseline;
	background: transparent;
}


        .star.outline {
            background: url("../../images/star-empty-lg.png") no-repeat scroll 0 0 rgba(0, 0, 0, 0);
        }
         .star.filled {
            background: url("../../images/star-fill-lg.png") no-repeat scroll 0 0 rgba(0, 0, 0, 0);
        }
         .star {
            color:rgba(0,0,0,0);
            display : inline-block;
            height:24px;
            overflow:hidden;
            text-indent:-999em;
            width:24px;
        }
        a {
            color:#005782;
            text-decoration:none;
        }




body { line-height: 1; }

ol, ul { list-style: none; }
blockquote, q { quotes: none; }
blockquote:before, blockquote:after, q:before, q:after { content: ''; content: none; }
:focus { outline: 0; }
del { text-decoration: line-through; }
table {border-spacing: 0; } /* IMPORTANT, I REMOVED border-collapse: collapse; FROM THIS LINE IN ORDER TO MAKE THE OUTER BORDER RADIUS WORK */

/*------------------------------------------------------------------ */

/*This is not important*/
body{
	font-family:Arial, Helvetica, sans-serif;
	background: url(../../imgs/background.jpg);
	margin:0 auto;
	
}
a:link {
	color: #666;
	font-weight: bold;
	text-decoration:none;
}
a:visited {
	color: #666;
	font-weight:bold;
	text-decoration:none;
}
a:active,
a:hover {
	color: #bd5a35;
	text-decoration:underline;
}


/*
Table Style - This is what you want
------------------------------------------------------------------ */
table a:link {
	color: #666;
	font-weight: bold;
	text-decoration:none;
}
table a:visited {
	color: #999999;
	font-weight:bold;
	text-decoration:none;
}
table a:active,
table a:hover {
	color: #bd5a35;
	text-decoration:underline;
}
       
h2,form-horizontal,txtBoxS{
    font-family:Arial, Helvetica, sans-serif;
	color:#666;
	font-size:20px;
	text-shadow: 1px 1px 0px #fff;
	
	width : 500px;
	margin-left: auto;
    margin-right: auto;
}
table {
	font-family:Arial, Helvetica, sans-serif;
	color:#666;
	font-size:12px;
	text-shadow: 1px 1px 0px #fff;
	background:#eaebec;
	margin:20px;
	border:#ccc 1px solid;

	-moz-border-radius:3px;
	-webkit-border-radius:3px;
	border-radius:3px;

	-moz-box-shadow: 0 1px 2px #d1d1d1;
	-webkit-box-shadow: 0 1px 2px #d1d1d1;
	box-shadow: 0 1px 2px #d1d1d1;
}
table th {
	padding:21px 25px 22px 25px;
	border-top:1px solid #fafafa;
	border-bottom:1px solid #e0e0e0;

	background: #ededed;
	background: -webkit-gradient(linear, left top, left bottom, from(#ededed), to(#ebebeb));
	background: -moz-linear-gradient(top,  #ededed,  #ebebeb);
}
table th:first-child{
	text-align: left;
	padding-left:20px;
}
table tr:first-child th:first-child{
	-moz-border-radius-topleft:3px;
	-webkit-border-top-left-radius:3px;
	border-top-left-radius:3px;
}
table tr:first-child th:last-child{
	-moz-border-radius-topright:3px;
	-webkit-border-top-right-radius:3px;
	border-top-right-radius:3px;
}
table tr{
	text-align: center;
	padding-left:20px;
}
table tr td:first-child{
	text-align: left;
	padding-left:20px;
	border-left: 0;
}
table tr td {
	padding:-5px;
	border-top: 1px solid #ffffff;
	border-bottom:1px solid #e0e0e0;
	border-left: 1px solid #e0e0e0;
	
	background: #fafafa;
	background: -webkit-gradient(linear, left top, left bottom, from(#fbfbfb), to(#fafafa));
	background: -moz-linear-gradient(top,  #fbfbfb,  #fafafa);
}
table tr.even td{
	background: #f6f6f6;
	background: -webkit-gradient(linear, left top, left bottom, from(#f8f8f8), to(#f6f6f6));
	background: -moz-linear-gradient(top,  #f8f8f8,  #f6f6f6);
}
table tr:last-child td{
	border-bottom:0;
}
table tr:last-child td:first-child{
	-moz-border-radius-bottomleft:3px;
	-webkit-border-bottom-left-radius:3px;
	border-bottom-left-radius:3px;
}
table tr:last-child td:last-child{
	-moz-border-radius-bottomright:3px;
	-webkit-border-bottom-right-radius:3px;
	border-bottom-right-radius:3px;
}
table tr:hover td{
	background: #f2f2f2;
	background: -webkit-gradient(linear, left top, left bottom, from(#f2f2f2), to(#f0f0f0));
	background: -moz-linear-gradient(top,  #f2f2f2,  #f0f0f0);	
}

        .cadre {
                border-radius: 10px;
                background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F5FBFF), color-stop(100%,#C6E6FF)) !important;
            }

            .profile-name {
                padding: 0 !important;
                border: 0 !important;
                font-size: 1.5em !important;
                font-weight: bold !important;
                vertical-align: baseline !important;
                margin-top: -5.5em !important;
                margin-left: 11em !important;
                color: #000 !important;
            }


            .black_overlay {
                display: none;
                position: absolute;
                top: 0%;
                left: 0%;
                width: 100%;
                height: 100%;
                background-color: black;
                z-index: 1001;
                -moz-opacity: 0.8;
                opacity: .80;
                filter: alpha(opacity=80);
            }

            .white_content {
                display: none;
                position: absolute;
                top: 25%;
                left: 25%;
                width: 50%;
                height: 50%;
                padding: 16px;
                border: 16px solid orange;
                background-color: white;
                z-index: 1002;
                overflow: auto;
            }

            .myButton {
                -moz-box-shadow: inset 0px 1px 0px 0px #dcecfb;
                -webkit-box-shadow: inset 0px 1px 0px 0px #dcecfb;
                box-shadow: inset 0px 1px 0px 0px #dcecfb;
                background: -webkit-gradient(linear, left top, left bottom, color-stop(0.05, #bddbfa), color-stop(1, #80b5ea));
                background: -moz-linear-gradient(top, #bddbfa 5%, #80b5ea 100%);
                background: -webkit-linear-gradient(top, #bddbfa 5%, #80b5ea 100%);
                background: -o-linear-gradient(top, #bddbfa 5%, #80b5ea 100%);
                background: -ms-linear-gradient(top, #bddbfa 5%, #80b5ea 100%);
                background: linear-gradient(to bottom, #bddbfa 5%, #80b5ea 100%);
                filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#bddbfa', endColorstr='#80b5ea',GradientType=0);
                background-color: #bddbfa;
                -moz-border-radius: 6px;
                -webkit-border-radius: 6px;
                border-radius: 6px;
                border: 1px solid #84bbf3;
                display: inline-block;
                cursor: pointer;
                color: #ffffff;
                font-family: Arial;
                font-size: 15px;
                font-weight: bold;
                padding: 6px 24px;
                text-decoration: none;
                text-shadow: 0px 1px 0px #528ecc;
            }

                .myButton:hover {
                    cursor: grab;
                    background: -webkit-gradient(linear, left top, left bottom, color-stop(0.05, #80b5ea), color-stop(1, #bddbfa));
                    background: -moz-linear-gradient(top, #80b5ea 5%, #bddbfa 100%);
                    background: -webkit-linear-gradient(top, #80b5ea 5%, #bddbfa 100%);
                    background: -o-linear-gradient(top, #80b5ea 5%, #bddbfa 100%);
                    background: -ms-linear-gradient(top, #80b5ea 5%, #bddbfa 100%);
                    background: linear-gradient(to bottom, #80b5ea 5%, #bddbfa 100%);
                    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#80b5ea', endColorstr='#bddbfa',GradientType=0);
                    background-color: #80b5ea;
                }

                .myButton:active {
                    position: relative;
                    top: 1px;
                }

            .conf_content {
                display: none;
                position: absolute;
                top: 25%;
                left: 25%;
                height: 26em;
                width:60em;
                padding: 16px;
                border: 16px solid #80b5ea;
                background-color: white;
                z-index: 1002;
                overflow: auto;
            }
        body {
            font: 13px arial;
        }

        .suggest_link {
            background-color: #FFFFFF;
            padding: 2px 6px 2px 6px;
            width:400px;
    margin: auto;
    
        }

        .suggest_link_over {
            background-color: #3366CC;
            padding: 2px 6px 2px 6px;
            width:400px;
    margin: auto;
     
        }

        #search_suggest {
            position: absolute;
            background-color: #FFFFFF;
            text-align: left;            
            width:400px;
            margin: auto;
    
        }

        input[type=text] {
    width: 30%;
    box-sizing: border-box;
    border:2px solid #ccc;
    border-radius: 4px;
    font-size: 16px;
    background-color: white;
    background-image: url('https://cdn1.iconfinder.com/data/icons/hawcons/32/698627-icon-111-search-48.png');
    
    background-repeat: no-repeat;
    padding: 12px 20px 12px 40px;
}
        input[type=button], input[type=submit], input[type=reset] {
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 16px 32px;
    text-decoration: none;
    margin: 4px 2px;
    cursor: pointer;
}

       

    </style>

</head>

    <body>  
        <center>
        <h2>List Products   </h2>  
        @using (Html.BeginForm("SearchGood", "Good", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
        {
            <center>
                @Html.TextBoxFor(m => m.txt, new { @class = "txtBoxS", @type = "text", @id = "txtSearch", onkeyup = "searchSuggestGoodd(event)", autocomplete = "off" })

                <div id="search_suggest" style="margin-left:31%;"></div>
                <input type="submit" value="Search" class="btn btn-default" />
            </center>
        }


            <div style="color:darkcyan">
                MOST RATED CATEGORY: @ViewBag.bestCat

            </div>
            

            <div style="margin-left: 5em;">
                <center>
                <table  cellspacing='0'>
                    <tr>
                        <th ></th>
                        <th>Label</th>
                        <th>Brand</th>
                        <th>Description</th>
                        <th>Quantité</th>
                        <th>Swapper</th>
                        <th>Date depot</th>
                        <th><a href="/Good/SearchGoodSort">Rating</a></th>

                    </tr>

                    @foreach (var item in Model.listGoods)
                    {
                        <tr>
                            <td style="width:7em;">
@{
    String src = item.imgPath;
    if (src == null || src.Equals(""))
    {
        src = "/imgs/Product.png";

    }
    else
    {
        src = src.Substring(1, src.Length - 1);
    }
}
                                <img src="@src" style="position:absolute" width="70" height="70" onclick="openConfPopup('@src')"/>
                            </td>
                            <td class='even'>@Html.DisplayFor(modelItem => item.label)</td>
                            <td class='even'>@Html.DisplayFor(modelItem => item.brand)</td>
                            <td class='even'>@Html.DisplayFor(modelItem => item.description)</td>
                            
                            <td class='even'>@Html.DisplayFor(modelItem => item.quantity)</td>
                            <td class='even'><a href="/swappers/toProfile?idSwapper=@item.swapperID">@Html.DisplayFor(modelItem => item.swapper.firstname)</a></td>
                            <td>
                                <table>
                                    <tr><td>@Html.DisplayFor(modelItem => item.date.TimeOfDay.Hours): @item.date.TimeOfDay.Minutes</td></tr>
                                    <tr><td>@Html.DisplayFor(modelItem => item.date.Day)-@item.date.Month-@item.date.Year</td></tr>
                                </table>
                            </td>
                            <th>

                                
                                    <input type="hidden" class="articleID" value='<1>' />
                                    Current Score :
                                    <span id="currentS_@item.id_goods" class="CurrentScore">@item.score</span>
                                    <div class="yourScore">
                                    Your Score : <span id="YourScore_@item.id_goods" class="CurrentScore"></span>                                   
                                    </div><br />
                                    <div class="rating-star-block" id='div_@item.id_goods'>
                                    <a class="star outline" href="#" rating="1" title="vote 1" onclick="StarClick('@item.id_goods',1)"> vote 1</a>
                                    <a class="star outline" href="#" rating="2" title="vote 2" onclick="StarClick('@item.id_goods',2)"> vote 2</a>
                                    <a class="star outline" href="#" rating="3" title="vote 3" onclick="StarClick('@item.id_goods',3)"> vote 3</a>
                                    <a class="star outline" href="#" rating="4" title="vote 4" onclick="StarClick('@item.id_goods',4)"> vote 4</a>
                                    <a class="star outline" href="#" rating="5" title="vote 5" onclick="StarClick('@item.id_goods',5)"> vote 5</a>
                                    </div>



                            </th>
                           
                        </tr>

                                        }

                </table>

            </div>

        <div id="fade" class="black_overlay"></div>
        <div id="confPopup" class="conf_content" style="margin-top: -6em;margin-left:-11em;">
            <img id="imgPopup" style="width:40em; height:25em;" />
            <div style="" align="right" class="myButton" onclick="closeImgPopup()">Close</div>
            
        </div>
       
</body>
</html>
